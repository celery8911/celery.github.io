<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="芹菜的日进录">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="芹菜的日进录">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="芹菜的日进录">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>芹菜的日进录</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">芹菜的日进录</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/18/前端面试必备——DOM事件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Celery">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="芹菜的日进录">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/18/前端面试必备——DOM事件/" itemprop="url">DOM事件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-18T18:06:53+08:00">
                2018-09-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="面试题目"><a href="#面试题目" class="headerlink" title="面试题目"></a>面试题目</h2><ol>
<li>DOM事件级别</li>
<li>DOM事件模型</li>
<li>事件流</li>
<li>描述DOM事件捕获的具体流程</li>
<li>Event 对象的常见应用</li>
<li>自定义事件</li>
</ol>
<h2 id="解答"><a href="#解答" class="headerlink" title="解答"></a>解答</h2><h3 id="DOM事件的级别"><a href="#DOM事件的级别" class="headerlink" title="DOM事件的级别"></a>DOM事件的级别</h3><p><strong>DOM级别</strong>一共可以分为4个级别：DOM0级，DOM1级，DOM2级和 DOM3级。</p>
<p><strong>DOM事件分为3个级别</strong>：</p>
<ul>
<li>DOM0级事件处理</li>
<li>DOM2级事件处理</li>
<li>DOM3级事件处理</li>
</ul>
<p>如下图所示：<br><img src="/2018/09/18/前端面试必备——DOM事件/DOM级别.jpeg" alt=""></p>
<p>有人可能会问，为什么没有DOM1级事件处理呢？因为1级DOM标准中并没有定义事件相关的内容，所以没有所谓的1级DOM事件模型。</p>
<h4 id="1-HTML事件处理程序（HTML-的-on-属性）"><a href="#1-HTML事件处理程序（HTML-的-on-属性）" class="headerlink" title="1.HTML事件处理程序（HTML 的 on- 属性）"></a>1.HTML事件处理程序（HTML 的 on- 属性）</h4><p>在了解DOM0级事件之前，我们有必要先了解下<strong>HTML事件处理程序</strong>，也是最早的这一种的事件处理方式，代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;button type=&quot;button&quot; onclick=&quot;showFn()&quot;&gt;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    function showFn() &#123;</span><br><span class="line">        alert(&apos;Hello World&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>以上代码我们通过直接在HTML代码里定义了一个onclick的属性触发showFn方法。</p>
<p><strong>元素的事件监听属性</strong>，都是on加上事件名，比如onload就是on + load，表示load事件的监听代码。</p>
<blockquote>
<p>注意，这些属性的值是将会执行的代码，而不是一个函数<br>一旦指定的事件发生，on-属性的值是原样传入 JavaScript 引擎执行。因此如果要执行函数，不要忘记加上一对圆括号。</p>
</blockquote>
<p>使用这个方法指定的监听代码，只会在冒泡阶段触发。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div onClick=&quot;console.log(2)&quot;&gt;</span><br><span class="line">  &lt;button onClick=&quot;console.log(1)&quot;&gt;点击&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>上面代码中，<code>&lt;button&gt;</code>是<code>&lt;div&gt;</code>的子元素。<code>&lt;button&gt;</code>的click事件，也会触发<code>&lt;div&gt;</code>的click事件。由于on-属性的监听代码，只在冒泡阶段触发，所以点击结果是先输出1，再输出2，即事件从子元素开始冒泡到父元素。<br>直接设置on-属性，与通过元素节点的setAttribute方法设置on-属性，效果是一样的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">el.setAttribute(&apos;onclick&apos;, &apos;doSomething()&apos;);</span><br><span class="line">// 等同于</span><br><span class="line">// &lt;Element onclick=&quot;doSomething()&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>HTML事件处理程序的缺点：HTML于JS强耦合，我们一旦需要修改函数名就得修改两个地方。当然其优点是不需要操作DOM来完成事件的绑定。</strong></p>
<h4 id="2-DOM0级事件（元素节点的事件属性）"><a href="#2-DOM0级事件（元素节点的事件属性）" class="headerlink" title="2.DOM0级事件（元素节点的事件属性）"></a>2.DOM0级事件（元素节点的事件属性）</h4><p>什么是DOM0级处理事件呢？DOM0级事件就是将一个函数赋值给一个<strong>事件处理属性</strong>，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;button id=&quot;btn&quot; type=&quot;button&quot;&gt;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var btn = document.getElementById(&apos;btn&apos;);</span><br><span class="line">    </span><br><span class="line">    btn.onclick = function() &#123;</span><br><span class="line">        alert(&apos;Hello World&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // btn.onclick = null; 解绑事件 </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>以上代码我们给button定义了一个id，通过JS获取到了这个id的按钮，并将一个函数赋值给了一个事件处理属性<strong>onclick</strong>，这样的方法便是DOM0级处理事件的体现。我们可以通过给事件处理属性赋值null来解绑事件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">window.onload = doSomething;</span><br><span class="line"></span><br><span class="line">div.onclick = function (event) &#123;</span><br><span class="line">  console.log(&apos;触发事件&apos;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>使用这个方法指定的监听函数，也是只会在冒泡阶段触发。</strong></p>
<blockquote>
<p>注意，这种方法与 HTML 的on-属性的差异是，它的值是函数名（doSomething），而不像后者，必须给出完整的监听代码（doSomething()）。</p>
</blockquote>
<p><strong>DOM0级事件处理程序的缺点：在于一个处理程序无法同时绑定多个处理函数，比如我还想在按钮点击事件上加上另外一个函数。</strong></p>
<h4 id="2-DOM2级事件-EventTarget-addEventListener"><a href="#2-DOM2级事件-EventTarget-addEventListener" class="headerlink" title="2.DOM2级事件(EventTarget.addEventListener())"></a>2.DOM2级事件(EventTarget.addEventListener())</h4><p>DOM2级事件在DOM0级事件的基础上弥补了一个处理程序无法同时绑定多个处理函数的缺点，允许给一个处理程序添加多个处理函数。<br>代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;button id=&quot;btn&quot; type=&quot;button&quot;&gt;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var btn = document.getElementById(&apos;btn&apos;);</span><br><span class="line">    </span><br><span class="line">    function showFn() &#123;</span><br><span class="line">        alert(&apos;Hello World&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    btn.addEventListener(&apos;click&apos;, showFn, false);</span><br><span class="line">    </span><br><span class="line">    // btn.removeEventListener(&apos;click&apos;, showFn, false); 解绑事件 </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>DOM2级事件定义了<strong>addEventListener</strong>和<strong>removeEventListener</strong>两个方法，分别用来绑定和解绑事件，方法中包含3个参数: </p>
<ul>
<li>绑定的事件处理属性名称（不包含on）、</li>
<li>处理函数</li>
<li>是否在捕获时执行事件处理函数。</li>
</ul>
<p>如果我们还需要添加一个鼠标移入的方法，只需要再加一行：</p>
<p><code>btn.addEventListener(&#39;mouseover&#39;, showFn, false);</code></p>
<p>这样点击按钮和鼠标移入时都将触发showFn方法。</p>
<p>需要注意的是IE8级以下版本不支持addEventListener和removeEventListener，需要用attachEvent和detachEvent来实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">btn.attachEvent(&apos;onclick&apos;, showFn); // 绑定事件 </span><br><span class="line">btn.detachEvent(&apos;onclick&apos;, showFn); // 解绑事件</span><br></pre></td></tr></table></figure>
<p>这里我们不需要传入第三个参数，因为IE8级以下版本只支持<strong>冒泡型事件。</strong></p>
<blockquote>
<p>同一个事件可以添加多个监听函数。<br>能够指定在哪个阶段（捕获阶段还是冒泡阶段）触发监听函数。<br>除了 DOM 节点，其他对象（比如window、XMLHttpRequest等）也有这个接口，它等于是整个 JavaScript 统一的监听函数接口。</p>
</blockquote>
<h4 id="3-DOM3级事件"><a href="#3-DOM3级事件" class="headerlink" title="3.DOM3级事件"></a>3.DOM3级事件</h4><p>DOM3级事件在DOM2级事件的基础上添加了更多的事件类型，全部类型如下：</p>
<ul>
<li>UI事件，当用户与页面上的元素交互时触发，如：load、scroll</li>
<li>焦点事件，当元素获得或失去焦点时触发，如：blur、focus</li>
<li>鼠标事件，当用户通过鼠标在页面执行操作时触发如：dbclick、mouseup</li>
<li>滚轮事件，当使用鼠标滚轮或类似设备时触发，如：mousewheel</li>
<li>文本事件，当在文档中输入文本时触发，如：textInput </li>
<li>键盘事件，当用户通过键盘在页面上执行操作时触发，如：keydown、keypress</li>
<li>合成事件，当为IME（输入法编辑器）输入字符时触发，如：compositionstart</li>
<li>变动事件，当底层DOM结构发生变化时触发，如：DOMsubtreeModified</li>
</ul>
<p>同时DOM3级事件也允许使用者<strong>自定义一些事件</strong>。</p>
<h3 id="事件模型"><a href="#事件模型" class="headerlink" title="事件模型"></a>事件模型</h3><p><img src="/2018/09/18/前端面试必备——DOM事件/事件模型.jpeg" alt=""></p>
<blockquote>
<p>首先我们思考一个很有意思的事情：一张纸上画了两个同心圆，当我们把手指放到圆心上时，手指指向的不是一个圆，而是纸上的两个圆，同理之，当我们单击网页上的一个div块的时候（代码片段一），单击事件会仅仅作用在这个div上面吗？ 在浏览器发展到第四代时，IE和Netscape的开发团队都遇到这个问题，他们都一致认为，除了单击div块，我们也单击了body、 html、甚至是整个document，但不幸的是两个团队针对事件流模型产生了两个完全相反的概念。</p>
</blockquote>
<h4 id="1-事件冒泡（推荐）"><a href="#1-事件冒泡（推荐）" class="headerlink" title="1. 事件冒泡（推荐）"></a>1. 事件冒泡（推荐）</h4><p>IE的事件流称为事件冒泡。即：事件由最具体的元素接收(div)，逐级向上传播到不具体的节点(document)。<br>当我们点击代码片段一中id为box的div块时，单击事件会按照如下顺序传播：div ——&gt; body——&gt; html ——&gt; document<br><img src="evernotecid://0F1D815D-5BF9-41C6-AF68-3489211C4A2F/appyinxiangcom/16560494/ENNote/p1203?hash=19cb3803f91b165dcd5ef56266c6a66b" alt="19cb3803f91b165dcd5ef56266c6a66b.png"><br>如上图所示，click首先在div元素上发生，然后沿着Dom树向上传播，每一级节点都会发生直至传播到document对象。<br>测试代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;事件流&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">    #box1&#123;</span><br><span class="line">        width: 300px;</span><br><span class="line">        height: 300px;</span><br><span class="line">        background-color: red;</span><br><span class="line">    &#125;</span><br><span class="line">    #box2&#123;</span><br><span class="line">        width: 200px;</span><br><span class="line">        height: 200px;</span><br><span class="line">        background-color: yellow;</span><br><span class="line">    &#125;</span><br><span class="line">    #box3&#123;</span><br><span class="line">        height: 100px;</span><br><span class="line">        width: 100px;</span><br><span class="line">        background-color: green;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;box1&quot;&gt;</span><br><span class="line">        &lt;div id=&quot;box2&quot;&gt;</span><br><span class="line">            &lt;div id=&quot;box3&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    document.getElementById(&apos;box1&apos;).onclick = function () &#123;</span><br><span class="line">        console.log(&apos;box1 click&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">    document.getElementById(&apos;box2&apos;).onclick = function () &#123;</span><br><span class="line">        console.log(&apos;box2 click&apos;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    document.getElementById(&apos;box3&apos;).onclick = function () &#123;</span><br><span class="line">        console.log(&apos;box3 click&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>测试效果:</strong></p>
<p><img src="evernotecid://0F1D815D-5BF9-41C6-AF68-3489211C4A2F/appyinxiangcom/16560494/ENNote/p1203?hash=474ecbbf3082808b81e7857d917157c5" alt="474ecbbf3082808b81e7857d917157c5.png"><br><strong>note:</strong> </p>
<blockquote>
<p>几乎现代所有的浏览器都支持事件冒泡，不过有一些细微的差别IE5.5 和 IE5.5 - 版本的事件冒泡会跳过html元素（body 直接到 document）IE9、Firefox、Chrome、Safari则一直冒泡到window对象。</p>
</blockquote>
<h4 id="2、事件捕获"><a href="#2、事件捕获" class="headerlink" title="2、事件捕获"></a>2、事件捕获</h4><p>Netscape提出的事件流模型称为事件捕获。即：事件从最不具体的节点开始接收（document），传递至最具体的节点&lt;div&gt;，和IE的冒泡刚好相反， 事件捕获的本意是当事件到达预定目标前捕获它。<br>当我们点击代码片段一中id为box的div块时，单击事件会按照如下顺序传播：document——&gt; html ——&gt; body ——&gt; div<br><img src="evernotecid://0F1D815D-5BF9-41C6-AF68-3489211C4A2F/appyinxiangcom/16560494/ENNote/p1203?hash=a8ffc29762c08c9d404b2773e9b69e8f" alt="a8ffc29762c08c9d404b2773e9b69e8f.png"></p>
<p><strong>note</strong></p>
<blockquote>
<p>虽然事件捕获是Netscape唯一支持的事件流模型，但IE9、Firefox、Chrome、Safari目前也都支持这种事件模型，由于老版本的浏览器并不支持，所以我们应该尽量使用事件冒泡，有特殊需求的时候再考虑事件捕获。</p>
</blockquote>
<h4 id="3、DOM2级事件流"><a href="#3、DOM2级事件流" class="headerlink" title="3、DOM2级事件流"></a>3、DOM2级事件流</h4><p>为了能够兼容上述两种事件模型，又提出了一个DOM2级事件模型，它规定了事件流包含三个阶段：</p>
<ul>
<li>事件捕获阶段：为事件捕获提供机会；</li>
<li>处于目标阶段：事件的目标接收到事件（但并不会做出响应）；</li>
<li>事件冒泡阶段：事件响应阶段；</li>
</ul>
<p>在DOM2级事件流中，但我们点击代码片段一中的div，在事件捕获阶段从document -&gt;html -&gt;body就停止了（div元素在这个阶段并不会接收到点击事件）。紧接着，事件在div上发生，并把事件真正的处理看成是冒泡阶段的一部分，然后，冒泡阶段发生，事件又回传到document。<br><strong>测试代码：</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;DOM2级事件流&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">    #box1&#123;</span><br><span class="line">        width: 300px;</span><br><span class="line">        height: 300px;</span><br><span class="line">        background-color: red;</span><br><span class="line">    &#125;</span><br><span class="line">    #box2&#123;</span><br><span class="line">        width: 200px;</span><br><span class="line">        height: 200px;</span><br><span class="line">        background-color: yellow;</span><br><span class="line">    &#125;</span><br><span class="line">    #box3&#123;</span><br><span class="line">        height: 100px;</span><br><span class="line">        width: 100px;</span><br><span class="line">        background-color: green;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;box1&quot;&gt;</span><br><span class="line">        &lt;div id=&quot;box2&quot;&gt;</span><br><span class="line">            &lt;div id=&quot;box3&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    var box1 = document.getElementById(&apos;box1&apos;);</span><br><span class="line">    var box2 = document.getElementById(&apos;box2&apos;);</span><br><span class="line">    var box3 = document.getElementById(&apos;box3&apos;);</span><br><span class="line">    // true表示在捕获阶段处理事件、false表示在冒泡阶段处理</span><br><span class="line">    box1.addEventListener(&apos;click&apos;,function () &#123;</span><br><span class="line">        console.log(&apos;事件捕获阶段触发box1点击事件&apos;);</span><br><span class="line">    &#125;, true);</span><br><span class="line">    box1.addEventListener(&apos;click&apos;,function () &#123;</span><br><span class="line">        console.log(&apos;事件冒泡阶段触发box1点击事件&apos;);</span><br><span class="line">    &#125;, false);</span><br><span class="line">    box2.addEventListener(&apos;click&apos;,function () &#123;</span><br><span class="line">        console.log(&apos;事件捕获阶段触发box2点击事件&apos;);</span><br><span class="line">    &#125;, true);</span><br><span class="line">    box2.addEventListener(&apos;click&apos;,function () &#123;</span><br><span class="line">        console.log(&apos;事件冒泡阶段触发box2点击事件&apos;);</span><br><span class="line">    &#125;, false)</span><br><span class="line">    box3.addEventListener(&apos;click&apos;,function () &#123;</span><br><span class="line">        console.log(&apos;事件捕获阶段触发box3点击事件&apos;);</span><br><span class="line">    &#125;, true);</span><br><span class="line">    box3.addEventListener(&apos;click&apos;,function () &#123;</span><br><span class="line">        console.log(&apos;事件冒泡阶段触发box3点击事件&apos;);</span><br><span class="line">    &#125;, false)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>测试结果</strong><br><img src="evernotecid://0F1D815D-5BF9-41C6-AF68-3489211C4A2F/appyinxiangcom/16560494/ENNote/p1203?hash=d4175a7ead573ca041164c577d2652a8" alt="d4175a7ead573ca041164c577d2652a8.png"></p>
<h4 id="4、事件流的典型应用——事件代理"><a href="#4、事件流的典型应用——事件代理" class="headerlink" title="4、事件流的典型应用——事件代理"></a>4、事件流的典型应用——事件代理</h4><p>传统的事件处理中，需要为每个元素添加事件处理器。js事件代理则是一种简单有效的技巧，通过它可以把事件处理器添加到一个父级元素上，从而避免把事件处理器添加到多个子级元素上。<br>事件代理的原理用到的就是事件冒泡和目标元素，把事件处理器添加到父元素，等待子元素事件冒泡，并且父元素能够通过target（IE为srcElement）判断是哪个子元素，从而做相应处理, 下面举例说明：<br>传统的事件会为每个dom添加事件，代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;传统的事件绑定&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;ul id=&quot;color-list&quot;&gt;</span><br><span class="line">        &lt;li&gt;red&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;orange&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;yellow&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;green&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;blue&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;indigo&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;purple&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">(function() &#123;</span><br><span class="line">    var colorList = document.getElementById(&quot;color-list&quot;);</span><br><span class="line">    var colors = colorList.getElementsByTagName(&quot;li&quot;);</span><br><span class="line">    for (var i = 0; i &lt; colors.length; i++) &#123;</span><br><span class="line">        colors[i].addEventListener(&apos;click&apos;, showColor, false);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    function showColor(e) &#123;</span><br><span class="line">        e = e || window.event;</span><br><span class="line">        var targetElement = e.target || e.srcElement;</span><br><span class="line">        console.log(targetElement.innerHTML);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="描述DOM事件捕获的具体流程"><a href="#描述DOM事件捕获的具体流程" class="headerlink" title="描述DOM事件捕获的具体流程"></a>描述DOM事件捕获的具体流程</h3><p>window —&gt;document—&gt;html—&gt;—body—&gt;目标元素</p>
<h3 id="Event对象的常见应用"><a href="#Event对象的常见应用" class="headerlink" title="Event对象的常见应用"></a>Event对象的常见应用</h3><ul>
<li>event.preventDefault()</li>
<li>event.stopPropagation()</li>
<li>event.stopImmediatePropagation()</li>
<li>event.currentTarget</li>
<li>event.target</li>
</ul>
<p><strong>Event对象</strong>: 其实是一个事件处理程序的参数，当调用事件时，我们只需要将其传入事件函数就可以获取。代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function getEvent(event) &#123;</span><br><span class="line">    event = event || window.event;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的事件函数传入了一个名叫Event的参数作为事件对象，同时做了浏览器兼容处理。在IE8及以前本版之中，通过设置属性注册事件处理程序时，调用的时候并未传递事件对象，需要通过全局对象window.event来获取。所以上述代码中我们利用 || 来做判断，如果event对象存在则使用event，不存在则使用window.event。</p>
<p>Event对象包含了几个方法和多个属性，通过这些方法和属性我们可以获取事件的详细信息并进行相关处理。</p>
<h4 id="Event对象方法"><a href="#Event对象方法" class="headerlink" title="Event对象方法"></a>Event对象方法</h4><p>Event对象主要有以下两个方法，用于处理事件的传播（冒泡、捕获）和事件的取消。</p>
<h5 id="1-stopPropagation"><a href="#1-stopPropagation" class="headerlink" title="1. stopPropagation"></a>1. stopPropagation</h5><p>stopPropagation方法主要用于阻止事件的进一步传播，比如阻止事件继续向上层冒泡。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function getEvent(event) &#123;</span><br><span class="line">    event.stopPropagation();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">child.addEventListener(&apos;click&apos;, getEvent, false);</span><br></pre></td></tr></table></figure></p>
<p>如果你需要兼容IE8及以下版本浏览器，则需要利用cancelBubble来代替stopPropagation，因为低版本IE不支持stopPropagation方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function getEvent(event) &#123;</span><br><span class="line">    event = event || window.event;</span><br><span class="line">        </span><br><span class="line">    if (event.stopPropagation) &#123;</span><br><span class="line">        event.stopPropagation();</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        event.cancelBubble = true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>cancelBubble是IE事件对象的一个属性，设置这个属性为true能阻止事件进一步传播。</p>
<h5 id="2-preventDefault"><a href="#2-preventDefault" class="headerlink" title="2.preventDefault"></a>2.preventDefault</h5><p>preventDefault方法用于取消事件的默认操作，比如a链接的跳转行为和表单自动提交行为就可以用preventDefault方法来取消。代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a id=&quot;go&quot; href=&quot;https://www.baidu.com/&quot;&gt;禁止跳转&lt;/a&gt;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var go = document.getElementById(&apos;go&apos;);</span><br><span class="line"></span><br><span class="line">function goFn(event) &#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line"></span><br><span class="line">    console.log(&apos;我没有跳转！&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">go.addEventListener(&apos;click&apos;, goFn, false);</span><br></pre></td></tr></table></figure>
<p>通过preventDefault，我们成功阻止了a链接的跳转行为。不过，在IE9之前的浏览器中需要设置returnValue属性为false来实现。如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function goFn(event) &#123;</span><br><span class="line">    event = event || window.event;</span><br><span class="line">    </span><br><span class="line">    if (event.preventDefault) &#123;</span><br><span class="line">        event.preventDefault();</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        event.returnValue = false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    console.log(&apos;我没有跳转！&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="3-stopImmediatePropagation"><a href="#3-stopImmediatePropagation" class="headerlink" title="3.stopImmediatePropagation"></a>3.stopImmediatePropagation</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">和stopPropagation相比，stopImmediatePropagation同样可以阻止事件的传播，不同点在于其还可以把这个元素绑定的同类型事件也阻止了。如：</span><br></pre></td></tr></table></figure>
<p>我们在a链接上继续加了一个点击事件，如果我们在goFn方法中添加了stopImmediatePropagation方法，那么goFn2方法将不会被执行，同时也不会将点击事件冒泡至上层。</p>
<p>需要注意的是，stopImmediatePropagation目前一部分浏览器尚不支持，但是像jQuery这样的库封装了跨平台的stopImmediatePropagation方法。</p>
<h4 id="Event对象属性"><a href="#Event对象属性" class="headerlink" title="Event对象属性"></a>Event对象属性</h4><p>与Event对象的方法相比，因Event对象的属性相对较多，文本无法一一讲解，所以主要介绍实际项目中常用的Event对象属性。</p>
<h5 id="1-type属性"><a href="#1-type属性" class="headerlink" title="1.type属性"></a>1.type属性</h5><p>通过type我们可以获取事件发生的类型，比如点击事件我们获取的是’click’字符串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var go = document.getElementById(&apos;go&apos;);</span><br><span class="line"></span><br><span class="line">function goFn(event) &#123;</span><br><span class="line">    console.log(event.type); // 输出&apos;click&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">go.addEventListener(&apos;click&apos;, goFn, false);</span><br></pre></td></tr></table></figure></p>
<h5 id="2-target属性"><a href="#2-target属性" class="headerlink" title="2.target属性"></a>2.target属性</h5><p>target属性主要用于获取事件的目标对象，比如我们点击a标签获取的是a标签的html对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var go = document.getElementById(&apos;go&apos;);</span><br><span class="line"></span><br><span class="line">function goFn(event) &#123;</span><br><span class="line">    var target = event.target;</span><br><span class="line">    </span><br><span class="line">    console.log(target === go) // 返回true</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">go.addEventListener(&apos;click&apos;, goFn, false);</span><br></pre></td></tr></table></figure></p>
<p>在IE8及之前版本，我们需要使用srcElement而非target。兼容方案如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function goFn(event) &#123;</span><br><span class="line">    var event = event || window.event,    </span><br><span class="line">        target = event.target || event.srcElement;</span><br><span class="line">    </span><br><span class="line">    console.log(target === go) // 返回true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="3-鼠标事件属性"><a href="#3-鼠标事件属性" class="headerlink" title="3. 鼠标事件属性"></a>3. 鼠标事件属性</h5><p>在用鼠标触发事件时，主要的事件属性包含鼠标的位置和按键的状态，比如：clientX和clientY指定了鼠标在窗口坐标中的位置，button和which指定了按下的鼠标键是哪个。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function moveFn(event) &#123;</span><br><span class="line">    console.log(event.screenX) // 获取鼠标基于屏幕的X轴坐标</span><br><span class="line">    console.log(event.screenY) // 获取鼠标基于屏幕的Y轴坐标</span><br><span class="line">    console.log(event.clientX) // 获取鼠标基于浏览器窗口的X轴坐标</span><br><span class="line">    console.log(event.clientY) // 获取鼠标基于浏览器窗口的Y轴坐标</span><br><span class="line">    console.log(event.pageX) // 获取鼠标基于文档的X轴坐标</span><br><span class="line">    console.log(event.pageY) // 获取鼠标基于文档的Y轴坐标</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function clickFn(event) &#123;</span><br><span class="line">    console.log(event.button) // 获取鼠标按下的键。非IE浏览器中0为鼠标左键，1为鼠标中键，2为鼠标右键</span><br><span class="line">    console.log(event.which) // 获取指定事件上哪个键盘键或鼠标按钮被按下</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">document.addEventListener(&apos;mouseover&apos;, moveFn, false);</span><br><span class="line">document.addEventListener(&apos;click&apos;, clickFn, false);</span><br></pre></td></tr></table></figure></p>
<h5 id="4-键盘事件属性"><a href="#4-键盘事件属性" class="headerlink" title="4.键盘事件属性"></a>4.键盘事件属性</h5><p>在用键盘触发事件时，主要的事件属性包含键盘的按键keyCode和是否按下特殊键，比如：keyCode指定了按下键的键码值，ctrlKey指定是否按下了ctrl键。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function keyFn(event) &#123;</span><br><span class="line">    console.log(event.keyCode); // 获取按下键的键码值</span><br><span class="line">    console.log(event.ctrlKey); // 获取是否按下了ctrl键</span><br><span class="line">    console.log(event.shiftKey); // 获取是否按下了shift键</span><br><span class="line">    console.log(event.altKey); // 获取是否按下了alt键</span><br><span class="line">    console.log(event.metaKey); // 获取是否按下了meta键</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">document.addEventListener(&apos;keyup&apos;, keyFn, false);</span><br></pre></td></tr></table></figure></p>
<p>类似的事件属性还有表单事件属性和window事件属性等，这里不再做详细介绍。</p>
<h3 id="自定义事件"><a href="#自定义事件" class="headerlink" title="自定义事件"></a>自定义事件</h3><p>与自定义事件的函数有 Event、CustomEvent 和 dispatchEvent。</p>
<h4 id="Event"><a href="#Event" class="headerlink" title="Event"></a>Event</h4><p>直接自定义事件，使用 Event 构造函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var event = new Event(&apos;build&apos;);</span><br><span class="line"></span><br><span class="line">// Listen for the event.</span><br><span class="line">elem.addEventListener(&apos;build&apos;, function (e) &#123; ... &#125;, false);</span><br><span class="line"></span><br><span class="line">// Dispatch the event.</span><br><span class="line">elem.dispatchEvent(event);</span><br></pre></td></tr></table></figure>
<h4 id="CustomEvent"><a href="#CustomEvent" class="headerlink" title="CustomEvent"></a>CustomEvent</h4><p>CustomEvent 可以创建一个更高度自定义事件，还可以附带一些数据，具体用法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var myEvent = new CustomEvent(eventname, options);</span><br></pre></td></tr></table></figure>
<p>其中options可以是:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    detail: &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;,</span><br><span class="line">    bubbles: true,</span><br><span class="line">    cancelable: false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中 detail 可以存放一些初始化的信息，可以在触发的时候调用。其他属性就是定义该事件是否具有冒泡等等功能。</p>
<p><code>dispatchEvent</code></p>
<p>这个用于触发自定义的事件。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Celery</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Celery</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
